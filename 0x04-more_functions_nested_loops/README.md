Working on C functions, nested loops and conditionals